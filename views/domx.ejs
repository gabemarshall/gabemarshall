<!DOCTYPE html>
<html>
  <head>
    <title>jQuery .html DOM XSS Example</title>
    <link rel='stylesheet' href='/bower_components/bootstrap/dist/css/bootstrap.min.css' />
    <link rel='stylesheet' href='/bower_components/bootstrap/dist/css/bootstrap-theme.css' />
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <script src="js/jquery.js"></script>

  <script type="text/javascript" src="js/html2canvas.js"></script>
  <script type="text/javascript" src="js/jquery.plugin.html2canvas.js"></script>
   </head>
  <body>
<h1 id="target">jQuery .html DOM XSS</h1>
<br>
<h4>This is an example of a vulnerable DOM XSS page. User input is accepted via the "sink" query parameter"</h4>
<!-- <h4>1. JQuery's .html()</h4> -->
<small><a href="/?sink=hello">Sample Payload</a></small>
<br><br>
<p class="sink"></p>
<br><br>   
<script>

function getParameterByName(name) {
    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
        results = regex.exec(location.search);
    return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
}

$('.sink').html(getParameterByName("sink"))

</script>


</html>
